<div class="register-container">
  <form (ngSubmit)="register()" #registerForm="ngForm" class="register-form">
    <h2>Crear una Cuenta</h2>

    @if (registrationError) {
      <div class="error-global">
        {{ registrationError }}
      </div>
    }

    <div class="form-group">
      <label for="username">Nombre de Usuario</label>
      <input
        type="text"
        id="username"
        name="username"
        [(ngModel)]="userData.username"
        required
        #usernameInput="ngModel"
      />
      @if (usernameInput.invalid && (usernameInput.dirty || usernameInput.touched)) {
        <div class="error">
          <div>El nombre de usuario es requerido.</div>
        </div>
      }
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        name="email"
        [(ngModel)]="userData.email"
        required
        email
        #emailInput="ngModel"
      />
      @if (emailInput.invalid && (emailInput.dirty || emailInput.touched)) {
        <div class="error">
          @if (emailInput.errors?.['required']) {
            <div>El email es requerido.</div>
          }
          @if (emailInput.errors?.['email']) {
            <div>Introduce un email v치lido.</div>
          }
        </div>
      }
    </div>

    <div class="form-group">
      <label for="password">Contrase침a</label>
      <input
        type="password"
        id="password"
        name="password"
        [(ngModel)]="userData.password"
        required
        minlength="8"
        #passwordInput="ngModel"
      />
       @if (passwordInput.invalid && (passwordInput.dirty || passwordInput.touched)) {
        <div class="error">
           @if (passwordInput.errors?.['required']) {
            <div>La contrase침a es requerida.</div>
          }
           @if (passwordInput.errors?.['minlength']) {
            <div>La contrase침a debe tener al menos 8 caracteres.</div>
          }
        </div>
      }
    </div>

    <div class="form-group">
      <label for="role">Rol</label>
      <select id="role" name="role" [(ngModel)]="userData.role" required>
        <option value="lector">Lector</option>
        <option value="redactor">Redactor</option>
        <option value="editor">Editor</option>
      </select>
    </div>

    <button type="submit" [disabled]="registerForm.invalid">Registrarse</button>
  </form>
</div>
